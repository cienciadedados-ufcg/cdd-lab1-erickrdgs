---
title: "EDA Laboratório 1"
output:
  html_notebook:
    toc: yes
    toc_float: yes
  html_document:
    df_print: paged
    toc: yes
    toc_float: yes
---

```{r setup, echo=FALSE, warning=FALSE, message=FALSE}
library(tidyverse)
library(here)
theme_set(theme_bw())
```

Nesse lab. analisaremos as séries Breaking Bad, Hannibal e Sherlock, respondendo as seguintes perguntas:

1. Qual delas é mais bem avaliada no IMDB A diferença é grande? Pequena? Muda de acordo com as temporadas?
2. Qual das séries tem episódios de qualidade mais irregular segundo o IMDB? A diferença é grande? Pequena?

```{r}
series = read_csv(here("data/series_from_imdb.csv"), 
                    progress = FALSE,
                    col_types = cols(.default = col_double(), 
                                     series_name = col_character(), 
                                     episode = col_character(), 
                                     url = col_character(),
                                     season = col_character())) %>% 
    filter(series_name == "Breaking Bad" | series_name == "Sherlock" | series_name == "Hannibal")

```

#1. Visão geral

```{r}

series %>%
    filter(series_name == "Breaking Bad")

series %>%
    filter(series_name == "Sherlock")

series %>%
    filter(series_name == "Hannibal")

```

##2. Qual a série com a melhor avaliação?

```{r}

seriesBySeason <- series %>%
    group_by(series_name, season) %>%
    mutate (season_rating = round(mean(user_rating), 2))

ggplot(seriesBySeason, aes(x = season, y = season_rating, group = series_name, label = season_rating, color = series_name)) +
       geom_line() +
       geom_point() +
       geom_text(nudge_x = .1, nudge_y = -.02, color = "blue") +
       labs(y = "Rating", x = "Season")

```


##2.1 Quais as avaliações por episódio?

```{r}

ggplot(seriesBySeason, aes(x = season_ep, y = user_rating, group = series_name, label = season_rating, color = series_name)) +
       geom_line() +
       geom_point() +
       facet_wrap(~season, nrow = 5) +
       scale_x_continuous(breaks = (1:16)) +
       labs(y = "Rating", x = "Episodes")

```

##2.2 Qualidade das séries

```{r}

ggplot(series, aes(series_name, user_rating)) + geom_boxplot() + labs(y = "Rating", x = "Series")

```
